{% extends 'cardDatabase/html/database_base.html' %}
{% load static card_database_tags %}

{% block title %}FoWind - {{ card.name }}{% endblock %}

{% comment "Swapping out card image display code to fall back to something if no card image is available. Previous functionality would error out the whole page if no image is available." %}

Old code: {% block image_preview_url %}{{ card.card_image.url }}{% endblock %}
New: {% block image_preview_url %} {% if card.card_image %}{{ card.card_image.url }}{% else %}NOIMG{% endif %}{% endblock %}
{% endcomment %}

{% block image_preview_url %} {% if card.card_image %}{{ card.card_image.url }}{% else %}NOIMG{% endif %}{% endblock %}

{% block adminoptions %}
    {{ block.super }}
    {% if request.user.is_staff %}
        <a href="{% url 'admin:cardDatabase_card_change' card.pk %}">Edit Card</a>
    {% endif %}
{% endblock %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/view_card.css' %}">
    {% if request.user_agent.is_mobile or request.user_agent.is_tablet %}
        <link rel="stylesheet" href="{% static 'css/view_card_mobile.css' %}">
    {% endif %}
{% endblock %}
{% block body %}
    {{ block.super }}
    {% include 'cardDatabase/html/card_details.html' with referred_by=card|card_referenced_by card=card %}
    {% for other_side in card.other_sides %}
        {% include 'cardDatabase/html/card_details.html' with referred_by=other_side|card_referenced_by card=other_side %}
    {% endfor %}
{% endblock %}